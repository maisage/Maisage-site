<!-- Start Here form -->
<div id="start" class="mt-8 p-6 bg-emerald-50 rounded-xl shadow-sm">
  <h2 class="text-xl font-semibold text-emerald-800 mb-4">Start Here</h2>

  <form id="start-form"
        action="https://formspree.io/f/mvgdoenn"
        method="POST"
        class="grid gap-4"
        novalidate>
    <div>
      <label class="block text-sm font-medium text-slate-700 mb-1">Your Name</label>
      <input name="name" required
             class="w-full rounded-md border border-slate-300 px-3 py-2 text-sm focus:ring-2 focus:ring-emerald-600"
             placeholder="Enter your name" />
    </div>

    <div>
      <label class="block text-sm font-medium text-slate-700 mb-1">Email</label>
      <input type="email" name="email" required
             class="w-full rounded-md border border-slate-300 px-3 py-2 text-sm focus:ring-2 focus:ring-emerald-600"
             placeholder="Enter your email" />
    </div>

    <div>
      <label class="block text-sm font-medium text-slate-700 mb-1">Zip Code</label>
      <input name="zip" inputmode="numeric" pattern="\\d{5}(-\\d{4})?"
             class="w-full rounded-md border border-slate-300 px-3 py-2 text-sm focus:ring-2 focus:ring-emerald-600"
             placeholder="Enter your zip code" />
      <p class="text-xs text-slate-500 mt-1">Format: 12345 or 12345-6789</p>
    </div>

    <div>
      <label class="block text-sm font-medium text-slate-700 mb-1">Message</label>
      <textarea name="message" rows="3"
                class="w-full rounded-md border border-slate-300 px-3 py-2 text-sm focus:ring-2 focus:ring-emerald-600"
                placeholder="Tell us how we can help or what you’re planning for."></textarea>
    </div>

    <!-- Optional: subject line in the email you receive -->
    <input type="hidden" name="_subject" value="Maisage – Start Here submission" />
    <!-- Optional: where to go after success (remove if you prefer inline message) -->
    <!-- <input type="hidden" name="_redirect" value="https://maisage.com/thanks.html" /> -->

    <!-- Honeypot (spam trap) -->
    <input type="text" name="_gotcha" style="display:none" tabindex="-1" autocomplete="off" />

    <!-- Tracking: page source -->
    <input type="hidden" name="page_source" id="page_source" />

    <button type="submit"
            class="inline-flex items-center justify-center rounded-md px-4 py-2 text-sm font-medium bg-emerald-600 text-white hover:bg-emerald-700">
      Submit
    </button>

    <p id="form-success" class="hidden text-emerald-700 text-sm">Thanks — your message was sent.</p>
    <p id="form-error" class="hidden text-red-600 text-sm">Something went wrong. Please try again.</p>
  </form>
</div>

<script>
  const form = document.getElementById('start-form');
  const ok = document.getElementById('form-success');
  const err = document.getElementById('form-error');
  const pageSource = document.getElementById('page_source');

  // record where the user submitted from
  if (pageSource) pageSource.value = window.location.href + (document.referrer ? ' | ref: ' + document.referrer : '');

  form.addEventListener('submit', async (e) => {
    e.preventDefault();

    // simple front-end validation
    if (!form.checkValidity()) {
      form.reportValidity();
      return;
    }

    const data = new FormData(form);
    try {
      const res = await fetch(form.action, {
        method: 'POST',
        body: data,
        headers: { 'Accept': 'application/json' }
      });
      if (res.ok) {
        form.reset();
        ok.classList.remove('hidden');
        err.classList.add('hidden');
      } else {
        err.classList.remove('hidden');
        ok.classList.add('hidden');
      }
    } catch {
      err.classList.remove('hidden');
      ok.classList.add('hidden');
    }
  });
</script>
